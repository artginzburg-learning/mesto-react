{"version":3,"sources":["utils/api.js","utils/utils.js","contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Card.js","components/Main.js","components/Footer.js","components/ImagePopup.js","components/PopupWithForm.js","components/popups/PopupInput.js","components/popups/EditProfilePopup.js","components/popups/EditAvatarPopup.js","components/popups/AddPlacePopup.js","components/popups/ConfirmDeletePopup.js","components/App.js","reportWebVitals.js","index.js"],"names":["api","options","_handleFetch","res","ok","json","Promise","reject","status","editProfile","name","about","_customFetch","addCard","link","deleteCard","cardId","changeLikeCardStatus","updateAvatar","avatar","this","_baseUrl","baseUrl","_headers","headers","target","method","body","JSON","stringify","fetch","then","authorization","popupSelectors","defaultUserState","CurrentUserStateContext","React","createContext","CurrentUserDispatchContext","CurrentUserProvider","children","useState","currentUser","setCurrentUser","useEffect","getUserInfo","Provider","value","useCurrentUser","context","useContext","undefined","Error","useCurrentUserDispatcher","dispatch","user","updates","a","updatedUser","Header","className","href","alt","src","logo","Card","props","card","likes","isTemporarilyLocal","owner","cardDeleteButtonClassName","_id","cardLikeButtonClassName","some","i","onClick","onCardClick","onCardDelete","type","onCardLike","length","Main","onEditAvatar","onEditProfile","onAddPlace","cards","map","Math","random","Footer","rel","ImagePopup","onClose","isOpen","id","PopupWithForm","title","onSubmit","action","buttonTitle","PopupInput","forwardRef","ref","defaultType","minLength","EditProfilePopup","setName","setAbout","e","preventDefault","updateUser","onUpdateUser","onChange","autoComplete","autoCapitalize","placeholder","maxLength","required","EditAvatarPopup","createRef","current","onUpdateAvatar","reset","AddPlacePopup","setTitle","setLink","ConfirmDeletePopup","App","isImagePopupOpen","setIsImagePopupOpen","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","selectedCard","setSelectedCard","setCards","oldCards","isLiked","expectedCardLikes","filter","like","expectedCard","c","newCard","closeAllPopups","handlePopupClick","currentTarget","classList","contains","getInitialCards","handleUpdateUser","handleUpdateAvatar","escHandler","useCallback","key","document","addEventListener","removeEventListener","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.61f2ed18.chunk.js","sourcesContent":["const cohortId = 'cohort-24';\nconst token = '70313b07-c3c0-40aa-a296-04d0e6bc7885';\n\nconst api = {\n  url: 'mesto.nomoreparties.co',\n  protocol: 'https://',\n  version: 'v1',\n};\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _handleFetch = res =>\n    res.ok\n      ? res.json()\n      : Promise.reject(`Ошибка: ${res.status}`);\n\n  _customFetch(target, method, body) {\n    const options = {\n      headers: this._headers\n    };\n\n    if (method && (method !== 'GET')) {\n      options.method = method;\n      if (method !== 'DELETE') {\n        options.headers['Content-Type'] = 'application/json';\n      }\n    }\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}/${target}`, options)\n      .then(this._handleFetch);\n  }\n\n  getUserInfo() {\n    return this._customFetch('users/me');\n  }\n\n  getInitialCards() {\n    return this._customFetch('cards');\n  }\n\n  editProfile = ({ name, about }) =>\n    this._customFetch('users/me', 'PATCH', {\n      name,\n      about\n    });\n\n  addCard = (name, link) =>\n    this._customFetch('cards', 'POST', {\n      name,\n      link\n    });\n\n  deleteCard = cardId =>\n    this._customFetch(`cards/${cardId}`, 'DELETE');\n\n  changeLikeCardStatus = (cardId, status) =>\n  this._customFetch(`cards/likes/${cardId}`, status ? 'PUT' : 'DELETE');\n\n  updateAvatar = ({ avatar }) =>\n    this._customFetch('users/me/avatar', 'PATCH', {\n      avatar\n    });\n}\n\nexport default new Api({\n  baseUrl: `${api.protocol}${api.url}/${api.version}/${cohortId}`,\n  headers: {\n    authorization: token\n  }\n}); ","export const popupSelectors = {\n  closeButtonClass: 'popup__close-button'\n}","import React from 'react';\n\nimport api from '../utils/api';\n\nconst defaultUserState = {\n  name: 'Неизвестный',\n  about: 'Потеряно соединение с сервером',\n  avatar: '',\n};\n\nconst CurrentUserStateContext = React.createContext();\nconst CurrentUserDispatchContext = React.createContext();\n\nfunction CurrentUserProvider({ children }) {\n  const [currentUser, setCurrentUser] = React.useState(defaultUserState);\n\n  React.useEffect(() => {\n    api.getUserInfo().then(setCurrentUser);\n  }, [setCurrentUser]);\n\n  return (\n    <CurrentUserStateContext.Provider value={currentUser}>\n      <CurrentUserDispatchContext.Provider value={setCurrentUser}>\n        {children}\n      </CurrentUserDispatchContext.Provider>\n    </CurrentUserStateContext.Provider>\n  );\n}\n\nfunction useCurrentUser() {\n  const context = React.useContext(CurrentUserStateContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUser must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction useCurrentUserDispatcher() {\n  const context = React.useContext(CurrentUserDispatchContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUserDispatcher must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nasync function updateUser(dispatch, user, updates) {\n  dispatch({...user, ...updates});\n\n  try {\n    const updatedUser = await api.editProfile(updates);\n    dispatch(updatedUser);\n  } catch (error) {\n    dispatch(user);\n    throw error;\n  }\n}\n\nasync function updateAvatar(dispatch, user, updates) {\n  dispatch({...user, ...updates});\n\n  try {\n    const updatedUser = await api.updateAvatar(updates);\n    dispatch(updatedUser);\n  } catch (error) {\n    dispatch(user);\n    throw error;\n  }\n}\n\nexport { CurrentUserProvider, useCurrentUser, useCurrentUserDispatcher, updateUser, updateAvatar };","export default __webpack_public_path__ + \"static/media/logo.6fa47d29.svg\";","import logo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n\n      <a target=\"_self\" href=\"https://github.com/artginzburg/mesto-react\" className=\"logo header__logo\">\n        <img className=\"logo__img\" alt=\"Mesto\" src={logo} />\n      </a>\n\n    </header>\n  );\n}\n\nexport default Header;","import { useCurrentUser } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n  const card = props.card;\n\n  card.likes = card.likes ?? [];\n\n  const currentUser = useCurrentUser();\n\n  if (card.isTemporarilyLocal) {\n    card.owner = currentUser;\n  }\n\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n    'element__trash-button' + (isOwn ? ' element__trash-button_visible' : '')\n  );\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = (\n    'element__like-button' + (isLiked ? ' element__like-button_active' : '')\n  );\n\n  function handleImageClick() {\n    props.onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardDelete(card);\n  }\n\n  return (\n    <li className=\"element\">\n      <img onClick={handleImageClick} className=\"element__image\" alt={card.name} src={card.link} />\n      <button onClick={handleDeleteClick} type=\"reset\" className={cardDeleteButtonClassName} />\n      <div className=\"element__container\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__likes\">\n          <button onClick={handleLikeClick} type=\"button\" className={cardLikeButtonClassName} />\n          <p className=\"element__like-counter\">\n            {card.likes.length}\n          </p>\n        </div>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;","import Card from './Card';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nexport default function Main(props) {\n  const currentUser = useCurrentUser();\n\n  return (\n    <main className=\"content\">\n\n      <section className=\"profile\">\n        <button onClick={props.onEditAvatar} type=\"button\" className=\"profile__avatar-container\">\n          <img alt=\"Аватар\" className=\"profile__avatar\" src={currentUser.avatar} />\n        </button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <p className=\"profile__description\">{currentUser.about}</p>\n          <button onClick={props.onEditProfile} type=\"button\" className=\"profile__edit-button\" />\n        </div>\n        <button onClick={props.onAddPlace} type=\"button\" className=\"profile__add-button\" />\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {props.cards.map(card =>\n            <Card key={card._id ?? Math.random()} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} card={card} />\n          )}\n        </ul>\n      </section>\n\n    </main>\n  );\n}","function Footer() {\n  return (\n    <footer className=\"footer\">\n\n      <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/artginzburg\" className=\"footer__copyright\">&copy; 2021 Art Ginzburg</a>\n\n    </footer>\n  );\n}\n\nexport default Footer;","import { popupSelectors } from '../utils/utils';\n\nfunction ImagePopup(props) {\n  const card = props.card;\n\n  return (\n    <section onClick={props.onClose} className={'popup popup_type_image' + (props.isOpen ? ' popup_opened' : '')} id=\"image-viewer\">\n      <figure className=\"popup__figure\">\n\n        <button type=\"button\" className={`${popupSelectors.closeButtonClass} popup__close-button_parent-corners_straight`} />\n        <img className=\"popup__image\" alt={card.name} src={card.link} />\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\n\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;","import { popupSelectors } from '../utils/utils';\n\nfunction PopupWithForm(props) {\n  return (\n    <section onClick={props.onClose} className={'popup' + (props.isOpen ? ' popup_opened' : '')} id={props.name}>\n      <div className=\"popup__container\">\n\n        <button type=\"reset\" className={popupSelectors.closeButtonClass} />\n        <h2 className=\"popup__title\">{props.title}</h2>\n\n        <form onSubmit={props.onSubmit} className=\"popup__form\" action=\"#\">\n\n          {props.children}\n\n          <button type=\"submit\" className=\"popup__button\">{props.buttonTitle ?? 'Сохранить'}</button>\n\n        </form>\n\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;","import React from 'react';\n\nconst PopupInput = React.forwardRef((props, ref) => {\n  const defaultType = 'text';\n\n  const type = props.type ?? defaultType;\n\n  const minLength = (type === defaultType)\n    ? 2\n    : null\n  ;\n\n  return (\n    <>\n      <input {...props} ref={ref} className=\"popup__input\" type={type} minLength={props.minLength ?? minLength} />\n      <p className=\"popup__error\" id={`${props.id}-error`} />\n    </>\n  )\n})\n\nexport default PopupInput;","import React from 'react';\n\nimport { useCurrentUser, useCurrentUserDispatcher, updateUser } from '../../contexts/CurrentUserContext';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nexport default function EditProfilePopup(props) {\n  const [name, setName] = React.useState('');\n  const [about, setAbout] = React.useState('');\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    updateUser(setCurrentUser, currentUser, {\n      name,\n      about,\n    });\n\n    props.onUpdateUser();\n  }\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleAboutChange(e) {\n    setAbout(e.target.value);\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Редактировать профиль\" name=\"profile-editor\">\n\n      <PopupInput value={name} onChange={handleNameChange} autoComplete=\"name\" autoCapitalize=\"words\" name=\"name\" id=\"profile-name\" placeholder=\"Имя\" maxLength=\"40\" required />\n\n      <PopupInput value={about} onChange={handleAboutChange} name=\"about\" id=\"profile-about\" placeholder=\"О себе\" maxLength=\"200\" required />\n\n    </PopupWithForm>\n  );\n}","import { createRef } from 'react';\n\nimport { useCurrentUser, useCurrentUserDispatcher, updateAvatar } from '../../contexts/CurrentUserContext';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nexport default function EditAvatarPopup(props) {\n  const ref = createRef();\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    updateAvatar(setCurrentUser, currentUser, {\n      avatar: ref.current.value\n    });\n\n    props.onUpdateAvatar();\n\n    e.target.reset();\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Обновить аватар\" name=\"avatar-editor\">\n\n      <PopupInput ref={ref} type=\"url\" name=\"avatar\" id=\"profile-avatar\" placeholder=\"Ссылка на картинку\" required />\n\n    </PopupWithForm>\n  );\n}","import { useState } from 'react';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nexport default function AddPlacePopup(props) {\n  const [title, setTitle] = useState('');\n  const [link, setLink] = useState('');\n\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onAddPlace(title, link);\n\n    setTitle('');\n    setLink('');\n  }\n\n  function handleTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Новое место\" name=\"element-editor\" buttonTitle=\"Создать\">\n\n      <PopupInput value={title} onChange={handleTitleChange} name=\"title\" id=\"element-title\" placeholder=\"Название\" maxLength=\"30\" required />\n\n      <PopupInput value={link} onChange={handleLinkChange} type=\"url\" name=\"link\" id=\"element-link\" placeholder=\"Ссылка на картинку\" required />\n\n    </PopupWithForm>\n  );\n}","import PopupWithForm from '../PopupWithForm';\n\nexport default function ConfirmDeletePopup(props) {\n  function handleSubmit(e) {\n    e.preventDefault();\n\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Вы уверены?\" name=\"delete-confirmation\" buttonTitle=\"Да\" />\n  );\n}","import React from 'react';\n\nimport api from '../utils/api';\nimport { popupSelectors } from '../utils/utils';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\nimport ImagePopup from './ImagePopup';\n\nimport EditProfilePopup from './popups/EditProfilePopup';\nimport EditAvatarPopup from './popups/EditAvatarPopup';\nimport AddPlacePopup from './popups/AddPlacePopup';\nimport ConfirmDeletePopup from './popups/ConfirmDeletePopup';\n\nfunction App() {\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [cards, setCards] = React.useState([]);\n\n\n  const currentUser = useCurrentUser();\n\n  React.useEffect(() =>\n    api.getInitialCards().then(setCards)\n  , []);\n\n\n  async function handleCardLike(card) {\n    const oldCards = cards;\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    const expectedCardLikes = isLiked\n      ? card.likes.filter(like => like._id !== currentUser._id)\n      : [...card.likes, currentUser];\n\n    const expectedCard = {...card, likes: expectedCardLikes};\n\n    setCards(\n      cards.map(c =>\n        c._id === card._id\n          ? expectedCard\n          : c\n      )\n    );\n\n    try {\n      const newCard = await api.changeLikeCardStatus(card._id, !isLiked);\n      setCards(\n        cards.map(c =>\n          c._id === card._id\n            ? newCard\n            : c\n        )\n      );\n    } catch (error) {\n      setCards(oldCards);\n      throw error;\n    }\n  }\n\n  function closeAllPopups() {\n    setIsImagePopupOpen(false);\n\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n  }\n\n  function handleCardDelete(card) {\n    const oldCards = cards;\n\n    setCards(\n      cards.filter(c =>\n        c._id !== card._id\n      )\n    );\n\n    api.deleteCard(card._id)\n      .catch(error => {\n        setCards(oldCards);\n        throw error;\n      })\n    ;\n\n    closeAllPopups();\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n\n    setIsImagePopupOpen(true);\n  }\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleConfirmDeleteClick(card) {\n    setSelectedCard(card);\n\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  function handlePopupClick(e) {\n    if (e.target === e.currentTarget || e.target.classList.contains(popupSelectors.closeButtonClass)) {\n      closeAllPopups();\n    }\n  }\n\n  const handleUpdateUser = closeAllPopups;\n  const handleUpdateAvatar = closeAllPopups;\n\n  function handleAddPlaceSubmit(title, link) {\n    const oldCards = cards;\n\n    const expectedCard = {\n      isTemporarilyLocal: true,\n      name: title,\n      link\n    };\n\n    setCards([expectedCard, ...cards]);\n\n    api.addCard(title, link)\n      .then(newCard =>\n        setCards([newCard, ...cards])\n      )\n      .catch(() =>\n        setCards(oldCards)\n      );\n\n    closeAllPopups();\n  }\n\n\n  const escHandler = React.useCallback(e => {\n    if (e.key === 'Escape') {\n      closeAllPopups();\n    }\n  }, []);\n\n  React.useEffect(() => {\n    document.addEventListener('keydown', escHandler, false);\n\n    return () =>\n      document.removeEventListener('keydown', escHandler, false);\n  }, [escHandler]);\n\n  return (\n    <>\n\n      <Header />\n      <Main\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onEditAvatar={handleEditAvatarClick}\n        cards={cards}\n        onCardClick={handleCardClick}\n        onCardLike={handleCardLike}\n        onCardDelete={handleConfirmDeleteClick}\n      />\n      <Footer />\n\n      <EditProfilePopup onUpdateUser={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={handlePopupClick} />\n\n      <AddPlacePopup onAddPlace={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={handlePopupClick} />\n\n      <EditAvatarPopup onUpdateAvatar={handleUpdateAvatar} isOpen={isEditAvatarPopupOpen} onClose={handlePopupClick} />\n\n      <ConfirmDeletePopup card={selectedCard} onCardDelete={handleCardDelete} isOpen={isConfirmDeletePopupOpen} onClose={handlePopupClick} />\n\n      <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={handlePopupClick} />\n\n    </>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { CurrentUserProvider } from './contexts/CurrentUserContext';\n\nReactDOM.render(\n  <React.StrictMode>\n    <CurrentUserProvider>\n      <App />\n    </CurrentUserProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}