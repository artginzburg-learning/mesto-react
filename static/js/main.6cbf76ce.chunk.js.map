{"version":3,"sources":["utils/localStorageJSON.js","utils/api.js","contexts/CurrentUserContext.js","images/logo.svg","components/Header.js","components/Main.js","components/Card.js","components/Footer.js","utils/utils.js","components/PopupWithForm.js","components/popups/PopupInput.js","components/popups/EditProfilePopup.js","components/popups/EditAvatarPopup.js","components/popups/AddPlacePopup.js","components/popups/ConfirmDeletePopup.js","components/popups/ImagePopup.js","components/App.js","reportWebVitals.js","utils/FormValidator.js","utils/enableValidations.js","index.js"],"names":["useStateWithLocalStorage","computed","defaultForComputed","localStorageJSON","localStorage","JSON","parse","newValue","stringify","initiateLocalStorageJSON","React","useState","currentState","setCurrentState","useEffect","api","options","_paths","users","cards","_handleFetch","res","ok","json","Promise","reject","status","editProfile","name","about","_customFetch","addCard","link","deleteCard","cardId","changeLikeCardStatus","updateAvatar","avatar","this","_baseUrl","baseUrl","_headers","headers","target","method","body","fetch","then","authorization","defaultUserState","CurrentUserStateContext","createContext","CurrentUserDispatchContext","CurrentUserProvider","children","currentUser","setCurrentUser","getUserInfo","Provider","value","useCurrentUser","context","useContext","undefined","Error","useCurrentUserDispatcher","sendApiUpdate","dispatch","user","updates","func","a","updatedUser","Header","className","href","alt","src","logo","Card","props","card","likes","isTemporarilyLocal","owner","cardDeleteButtonClassName","_id","cardLikeButtonClassName","some","i","onClick","onCardClick","onCardDelete","type","onCardLike","length","defaultCard","defaultCards","push","Main","onEditAvatar","onEditProfile","onAddPlace","map","Math","random","Footer","rel","author","popupSelectors","defaultFormConfig","formSelector","inputSelector","submitButtonSelector","inputErrorClass","errorClass","PopupWithForm","onClose","isOpen","id","title","onSubmit","e","preventDefault","reset","document","activeElement","blur","action","buttonTitle","defaults","PopupInput","forwardRef","ref","required","conditionalMinLength","finalProps","minLength","EditProfilePopup","setName","setAbout","onUpdateUser","onChange","autoComplete","autoCapitalize","placeholder","maxLength","EditAvatarPopup","createRef","current","onUpdateAvatar","AddPlacePopup","setTitle","setLink","onReset","ConfirmDeletePopup","ImagePopup","App","isEditProfilePopupOpen","setIsEditProfilePopupOpen","isAddPlacePopupOpen","setIsAddPlacePopupOpen","isEditAvatarPopupOpen","setIsEditAvatarPopupOpen","isConfirmDeletePopupOpen","setIsConfirmDeletePopupOpen","isImagePopupOpen","setIsImagePopupOpen","selectedCard","setSelectedCard","setCards","oldCards","isLiked","expectedCardLikes","filter","like","expectedCard","c","newCard","closeAllPopups","handlePopupClick","currentTarget","getInitialCards","handleUpdateUser","handleUpdateAvatar","escHandler","useCallback","key","listenerArgs","addEventListener","removeEventListener","catch","error","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","FormValidator","data","element","_showInputError","inputElement","errorMessage","errorElement","_element","querySelector","classList","add","_data","textContent","_hideInputError","remove","_resetFormErrors","_inputList","forEach","_toggleButtonState","_checkInputValidity","validity","valid","validationMessage","_hasInvalidInput","inputList","disable","_buttonElement","disabled","_validationHandler","_setListeners","Array","from","querySelectorAll","popupsToValidate","ReactDOM","render","StrictMode","getElementById","popupSelector","enableValidation"],"mappings":"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","file":"static/js/main.6cbf76ce.chunk.js","sourcesContent":["import React from 'react';\n\nfunction initiateLocalStorageJSON(computed, defaultForComputed) {\n  return {\n    get [computed]() {\n      return localStorage[computed] ? JSON.parse(localStorage[computed]) : defaultForComputed;\n    },\n    set [computed](newValue) {\n      return localStorage[computed] = JSON.stringify(newValue);\n    }\n  };\n}\n\nexport default function useStateWithLocalStorage(computed, defaultForComputed) {\n  const localStorageJSON = initiateLocalStorageJSON(computed, defaultForComputed);\n\n  const [currentState, setCurrentState] = React.useState(localStorageJSON[computed]);\n\n  React.useEffect(() => {\n    localStorageJSON[computed] = currentState;\n  }, [currentState, localStorageJSON, computed]);\n\n  return [currentState, setCurrentState];\n}","const cohortId = 'cohort-24';\nconst token = '70313b07-c3c0-40aa-a296-04d0e6bc7885';\n\nconst api = {\n  url: 'mesto.nomoreparties.co',\n  protocol: 'https://',\n  version: 'v1',\n};\n\nclass Api {\n  constructor(options) {\n    this._baseUrl = options.baseUrl;\n    this._headers = options.headers;\n  }\n\n  _paths = {\n    users: 'users/me',\n    cards: 'cards'\n  };\n\n  _handleFetch = res =>\n    res.ok\n      ? res.json()\n      : Promise.reject(`Ошибка: ${res.status}`);\n\n  _customFetch(target, method, body) {\n    const options = {\n      headers: this._headers\n    };\n\n    if (method && (method !== 'GET')) {\n      options.method = method;\n      if (method !== 'DELETE') {\n        options.headers['Content-Type'] = 'application/json';\n      }\n    }\n\n    if (body) {\n      options.body = JSON.stringify(body);\n    }\n\n    return fetch(`${this._baseUrl}/${target}`, options)\n      .then(this._handleFetch);\n  }\n\n  getUserInfo() {\n    return this._customFetch(this._paths.users);\n  }\n\n  getInitialCards() {\n    return this._customFetch(this._paths.cards);\n  }\n\n  editProfile = ({ name, about }) =>\n    this._customFetch(this._paths.users, 'PATCH', {\n      name,\n      about\n    });\n\n  addCard = (name, link) =>\n    this._customFetch(this._paths.cards, 'POST', {\n      name,\n      link\n    });\n\n  deleteCard = cardId =>\n    this._customFetch(`${this._paths.cards}/${cardId}`, 'DELETE');\n\n  changeLikeCardStatus = (cardId, status) =>\n    this._customFetch(`${this._paths.cards}/likes/${cardId}`, status ? 'PUT' : 'DELETE');\n\n  updateAvatar = ({ avatar }) =>\n    this._customFetch(`${this._paths.users}/avatar`, 'PATCH', {\n      avatar\n    });\n}\n\nexport default new Api({\n  baseUrl: `${api.protocol}${api.url}/${api.version}/${cohortId}`,\n  headers: {\n    authorization: token\n  }\n}); ","import React from 'react';\n\nimport useStateWithLocalStorage from '../utils/localStorageJSON';\nimport api from '../utils/api';\n\nconst defaultUserState = {\n  name: 'Неизвестный',\n  about: 'Потеряно соединение с сервером',\n  avatar: '',\n};\n\nconst CurrentUserStateContext = React.createContext();\nconst CurrentUserDispatchContext = React.createContext();\n\nfunction CurrentUserProvider({ children }) {\n  const [currentUser, setCurrentUser] = useStateWithLocalStorage('currentUser', defaultUserState);\n\n  React.useEffect(() => {\n    api.getUserInfo().then(setCurrentUser);\n  }, [setCurrentUser]);\n\n  return (\n    <CurrentUserStateContext.Provider value={currentUser}>\n      <CurrentUserDispatchContext.Provider value={setCurrentUser}>\n        {children}\n      </CurrentUserDispatchContext.Provider>\n    </CurrentUserStateContext.Provider>\n  );\n}\n\nfunction useCurrentUser() {\n  const context = React.useContext(CurrentUserStateContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUser must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nfunction useCurrentUserDispatcher() {\n  const context = React.useContext(CurrentUserDispatchContext);\n  if (context === undefined) {\n    throw new Error('useCurrentUserDispatcher must be used within a CurrentUserProvider');\n  }\n  return context;\n}\n\nasync function sendApiUpdate(dispatch, user, updates, func) {\n  dispatch({...user, ...updates});\n\n  try {\n    const updatedUser = await api[func](updates);\n    dispatch(updatedUser);\n  } catch (error) {\n    dispatch(user);\n    throw error;\n  }\n}\n\nexport { CurrentUserProvider, useCurrentUser, useCurrentUserDispatcher, sendApiUpdate };","export default __webpack_public_path__ + \"static/media/logo.6fa47d29.svg\";","import logo from '../images/logo.svg';\n\nfunction Header() {\n  return (\n    <header className=\"header\">\n\n      <a target=\"_self\" href=\"https://github.com/artginzburg/mesto-react\" className=\"logo header__logo\">\n        <img className=\"logo__img\" alt=\"Mesto\" src={logo} />\n      </a>\n\n    </header>\n  );\n}\n\nexport default Header;","import Card from './Card';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nconst maximumCardsQuantity = 30;\n\nconst defaultCard = {\n  isTemporarilyLocal: true,\n  name: 'Загрузка...'\n};\n\nconst defaultCards = [];\nfor (let i = 0; i < maximumCardsQuantity; i++) {\n  defaultCards.push(defaultCard);\n}\n\nexport default function Main(props) {\n  const currentUser = useCurrentUser();\n\n  const cards = props.cards.length ? props.cards : defaultCards;\n\n  return (\n    <main className=\"content\">\n\n      <section className=\"profile\">\n        <button onClick={props.onEditAvatar} type=\"button\" className=\"profile__avatar-container\">\n          <img alt=\"Аватар\" className=\"profile__avatar\" src={currentUser.avatar} />\n        </button>\n        <div className=\"profile__info\">\n          <h1 className=\"profile__name\">{currentUser.name}</h1>\n          <p className=\"profile__description\">{currentUser.about}</p>\n          <button onClick={props.onEditProfile} type=\"button\" className=\"profile__edit-button\" />\n        </div>\n        <button onClick={props.onAddPlace} type=\"button\" className=\"profile__add-button\" />\n      </section>\n\n      <section className=\"elements\">\n        <ul className=\"elements__list\">\n          {cards.map(card =>\n            <Card key={card._id ?? Math.random()} onCardClick={props.onCardClick} onCardLike={props.onCardLike} onCardDelete={props.onCardDelete} card={card} />\n          )}\n        </ul>\n      </section>\n\n    </main>\n  );\n}","import { useCurrentUser } from '../contexts/CurrentUserContext';\n\nfunction Card(props) {\n  const card = props.card;\n\n  card.likes = card.likes ?? [];\n\n  const currentUser = useCurrentUser();\n\n  if (card.isTemporarilyLocal) {\n    card.owner = currentUser;\n  }\n\n  const isOwn = card.owner._id === currentUser._id;\n\n  const cardDeleteButtonClassName = (\n    'element__trash-button' + (isOwn ? ' element__trash-button_visible' : '')\n  );\n\n  const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n  const cardLikeButtonClassName = (\n    'element__like-button' + (isLiked ? ' element__like-button_active' : '')\n  );\n\n  function handleImageClick() {\n    props.onCardClick(card);\n  }\n\n  function handleLikeClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardLike(card);\n  }\n\n  function handleDeleteClick() {\n    if (card.isTemporarilyLocal) return;\n    props.onCardDelete(card);\n  }\n\n  return (\n    <li className=\"element\">\n      <img onClick={handleImageClick} className=\"element__image\" alt={card.name} src={card.link} />\n      <button onClick={handleDeleteClick} type=\"reset\" className={cardDeleteButtonClassName} />\n      <div className=\"element__container\">\n        <h2 className=\"element__title\">{card.name}</h2>\n        <div className=\"element__likes\">\n          <button onClick={handleLikeClick} type=\"button\" className={cardLikeButtonClassName} />\n          <p className=\"element__like-counter\">\n            {card.likes.length}\n          </p>\n        </div>\n      </div>\n    </li>\n  );\n}\n\nexport default Card;","import { author } from '../../package.json';\n\nfunction Footer() {\n  return (\n    <footer className=\"footer\">\n\n      <a target=\"_blank\" rel=\"noreferrer\" href=\"https://github.com/artginzburg\" className=\"footer__copyright\">&copy; 2021 {author}</a>\n\n    </footer>\n  );\n}\n\nexport default Footer;","export const popupSelectors = {\n  closeButtonClass: 'popup__close-button',\n}\n\nexport const defaultFormConfig = {\n  formSelector: '.popup__form',\n  inputSelector: '.popup__input',\n  submitButtonSelector: '.popup__button',\n  inputErrorClass: 'popup__input_type_error',\n  errorClass: 'popup__error_visible',\n};","import { popupSelectors } from '../utils/utils';\n\nfunction PopupWithForm(props) {\n  function handleSubmit(e) {\n    if (props.onSubmit) {\n      e.preventDefault();\n\n      props.onSubmit();\n    }\n\n    if (props.children) {\n      e.target.reset();\n    }\n\n    if (props.onSubmit) {\n      document.activeElement.blur(); // fixes mobile keyboard being stuck on the screen after form submission (due to `event.preventDefault()`)\n    }\n  }\n\n  return (\n    <section onClick={props.onClose} className={'popup' + (props.isOpen ? ' popup_opened' : '')} id={props.name}>\n      <div className=\"popup__container\">\n\n        <button type=\"reset\" className={popupSelectors.closeButtonClass} />\n        <h2 className=\"popup__title\">{props.title}</h2>\n\n        <form onSubmit={handleSubmit} className=\"popup__form\" action=\"#\">\n\n          {props.children}\n\n          <button type=\"submit\" className=\"popup__button\">{props.buttonTitle ?? 'Сохранить'}</button>\n\n        </form>\n\n      </div>\n    </section>\n  );\n}\n\nexport default PopupWithForm;","import { forwardRef } from 'react';\n\nconst defaults = {\n  type: 'text',\n  required: true,\n  minLength: 2,\n};\n\nconst PopupInput = forwardRef((props, ref) => {\n  const type = props.type ?? defaults.type;\n\n  const required = props.required ?? defaults.required;\n\n  const conditionalMinLength = (type === defaults.type)\n    ? defaults.minLength\n    : null\n  ;\n  const minLength = props.minLength ?? conditionalMinLength;\n\n  const finalProps = {\n    type,\n    minLength,\n    required\n  };\n\n  return (\n    <>\n      <input {...props} ref={ref} className=\"popup__input\" {...finalProps} />\n      <p className=\"popup__error\" id={`${props.id}-error`} />\n    </>\n  )\n})\n\nexport default PopupInput;","import React from 'react';\n\nimport { useCurrentUser, useCurrentUserDispatcher, sendApiUpdate } from '../../contexts/CurrentUserContext';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nexport default function EditProfilePopup(props) {\n  const [name, setName] = React.useState('');\n  const [about, setAbout] = React.useState('');\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  React.useEffect(() => {\n    setName(currentUser.name);\n    setAbout(currentUser.about);\n  }, [currentUser]);\n\n  function handleSubmit() {\n    sendApiUpdate(setCurrentUser, currentUser, {\n      name,\n      about,\n    }, 'editProfile');\n\n    props.onUpdateUser();\n  }\n\n  function handleNameChange(e) {\n    setName(e.target.value);\n  }\n\n  function handleAboutChange(e) {\n    setAbout(e.target.value);\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Редактировать профиль\" name=\"profile-editor\">\n\n      <PopupInput value={name} onChange={handleNameChange} autoComplete=\"name\" autoCapitalize=\"words\" name=\"name\" id=\"profile-name\" placeholder=\"Имя\" maxLength=\"40\" />\n\n      <PopupInput value={about} onChange={handleAboutChange} name=\"about\" id=\"profile-about\" placeholder=\"О себе\" maxLength=\"200\" />\n\n    </PopupWithForm>\n  );\n}","import { createRef } from 'react';\n\nimport { useCurrentUser, useCurrentUserDispatcher, sendApiUpdate } from '../../contexts/CurrentUserContext';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nexport default function EditAvatarPopup(props) {\n  const ref = createRef();\n\n  const currentUser = useCurrentUser();\n  const setCurrentUser = useCurrentUserDispatcher();\n\n  function handleSubmit() {\n    sendApiUpdate(setCurrentUser, currentUser, {\n      avatar: ref.current.value\n    }, 'updateAvatar');\n\n    props.onUpdateAvatar();\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Обновить аватар\" name=\"avatar-editor\">\n\n      <PopupInput ref={ref} type=\"url\" name=\"avatar\" id=\"profile-avatar\" placeholder=\"Ссылка на картинку\" />\n\n    </PopupWithForm>\n  );\n}","import { useState } from 'react';\n\nimport PopupWithForm from '../PopupWithForm';\n\nimport PopupInput from './PopupInput';\n\nconst defaults = {\n  title: '',\n  link: ''\n};\n\nexport default function AddPlacePopup(props) {\n  const [title, setTitle] = useState(defaults.title);\n  const [link, setLink] = useState(defaults.link);\n\n  function handleSubmit() {\n    props.onAddPlace(title, link);\n  }\n\n  function handleReset() {\n    setTitle(defaults.title);\n    setLink(defaults.link);\n  }\n\n  function handleTitleChange(e) {\n    setTitle(e.target.value);\n  }\n\n  function handleLinkChange(e) {\n    setLink(e.target.value);\n  }\n\n  return (\n    <PopupWithForm {...props} onReset={handleReset} onSubmit={handleSubmit} title=\"Новое место\" name=\"element-editor\" buttonTitle=\"Создать\">\n\n      <PopupInput value={title} onChange={handleTitleChange} name=\"title\" id=\"element-title\" placeholder=\"Название\" maxLength=\"30\" />\n\n      <PopupInput value={link} onChange={handleLinkChange} type=\"url\" name=\"link\" id=\"element-link\" placeholder=\"Ссылка на картинку\" />\n\n    </PopupWithForm>\n  );\n}","import PopupWithForm from '../PopupWithForm';\n\nexport default function ConfirmDeletePopup(props) {\n  function handleSubmit() {\n    props.onCardDelete(props.card);\n  }\n\n  return (\n    <PopupWithForm {...props} onSubmit={handleSubmit} title=\"Вы уверены?\" name=\"delete-confirmation\" buttonTitle=\"Да\" />\n  );\n}","import { popupSelectors } from '../../utils/utils';\n\nfunction ImagePopup(props) {\n  const card = props.card;\n\n  return (\n    <section onClick={props.onClose} className={'popup popup_type_image' + (props.isOpen ? ' popup_opened' : '')} id=\"image-viewer\">\n      <figure className=\"popup__figure\">\n\n        <button type=\"button\" className={`${popupSelectors.closeButtonClass} ${popupSelectors.closeButtonClass}_parent-corners_straight`} />\n        <img className=\"popup__image\" alt={card.name} src={card.link} />\n        <figcaption className=\"popup__caption\">{card.name}</figcaption>\n\n      </figure>\n    </section>\n  );\n}\n\nexport default ImagePopup;","import React from 'react';\n\nimport useStateWithLocalStorage from '../utils/localStorageJSON';\nimport api from '../utils/api';\n\nimport { useCurrentUser } from '../contexts/CurrentUserContext';\n\nimport Header from './Header';\nimport Main from './Main';\nimport Footer from './Footer';\n\nimport EditProfilePopup from './popups/EditProfilePopup';\nimport EditAvatarPopup from './popups/EditAvatarPopup';\nimport AddPlacePopup from './popups/AddPlacePopup';\nimport ConfirmDeletePopup from './popups/ConfirmDeletePopup';\nimport ImagePopup from './popups/ImagePopup';\n\nexport default function App() {\n  const [isEditProfilePopupOpen, setIsEditProfilePopupOpen] = React.useState(false);\n  const [isAddPlacePopupOpen, setIsAddPlacePopupOpen] = React.useState(false);\n  const [isEditAvatarPopupOpen, setIsEditAvatarPopupOpen] = React.useState(false);\n  const [isConfirmDeletePopupOpen, setIsConfirmDeletePopupOpen] = React.useState(false);\n  const [isImagePopupOpen, setIsImagePopupOpen] = React.useState(false);\n\n  const [selectedCard, setSelectedCard] = React.useState({});\n\n  const [cards, setCards] = useStateWithLocalStorage('cards', []);\n\n\n  const currentUser = useCurrentUser();\n\n  React.useEffect(() => {\n    api.getInitialCards().then(setCards);\n  }, [setCards]);\n\n  async function handleCardLike(card) {\n    const oldCards = cards;\n\n    const isLiked = card.likes.some(i => i._id === currentUser._id);\n\n    const expectedCardLikes = isLiked\n      ? card.likes.filter(like => like._id !== currentUser._id)\n      : [...card.likes, currentUser];\n\n    const expectedCard = {...card, likes: expectedCardLikes};\n\n    setCards(\n      cards.map(c =>\n        c._id === card._id\n          ? expectedCard\n          : c\n      )\n    );\n\n    try {\n      const newCard = await api.changeLikeCardStatus(card._id, !isLiked);\n      setCards(\n        cards.map(c =>\n          c._id === card._id\n            ? newCard\n            : c\n        )\n      );\n    } catch (error) {\n      setCards(oldCards);\n      throw error;\n    }\n  }\n\n  function closeAllPopups() {\n    setIsEditAvatarPopupOpen(false);\n    setIsEditProfilePopupOpen(false);\n    setIsAddPlacePopupOpen(false);\n    setIsConfirmDeletePopupOpen(false);\n    setIsImagePopupOpen(false);\n  }\n\n  function handleCardDelete(card) {\n    const oldCards = cards;\n\n    setCards(\n      cards.filter(c =>\n        c._id !== card._id\n      )\n    );\n\n    api.deleteCard(card._id)\n      .catch(error => {\n        setCards(oldCards);\n        throw error;\n      })\n    ;\n\n    closeAllPopups();\n  }\n\n\n  function handleEditAvatarClick() {\n    setIsEditAvatarPopupOpen(true);\n  }\n\n  function handleEditProfileClick() {\n    setIsEditProfilePopupOpen(true);\n  }\n\n  function handleAddPlaceClick() {\n    setIsAddPlacePopupOpen(true);\n  }\n\n  function handleConfirmDeleteClick(card) {\n    setSelectedCard(card);\n\n    setIsConfirmDeletePopupOpen(true);\n  }\n\n  function handleCardClick(card) {\n    setSelectedCard(card);\n\n    setIsImagePopupOpen(true);\n  }\n\n  function handlePopupClick(e) {\n    if (e.target === e.currentTarget) {\n      closeAllPopups();\n    }\n  }\n\n  const handleUpdateUser = closeAllPopups;\n  const handleUpdateAvatar = closeAllPopups;\n\n  function handleAddPlaceSubmit(title, link) {\n    const oldCards = cards;\n\n    const expectedCard = {\n      isTemporarilyLocal: true,\n      name: title,\n      link\n    };\n\n    setCards([expectedCard, ...cards]);\n\n    api.addCard(title, link)\n      .then(newCard =>\n        setCards([newCard, ...cards])\n      )\n      .catch(() =>\n        setCards(oldCards)\n      );\n\n    closeAllPopups();\n  }\n\n\n  const escHandler = React.useCallback(e => {\n    if (e.key === 'Escape') {\n      closeAllPopups();\n    }\n  }, []);\n\n  React.useEffect(() => {\n    const listenerArgs = [ 'keydown', escHandler, false ];\n\n    document.addEventListener(...listenerArgs);\n\n    return () =>\n      document.removeEventListener(...listenerArgs);\n  }, [escHandler]);\n\n  return (\n    <>\n\n      <Header />\n      <Main\n        onEditProfile={handleEditProfileClick}\n        onAddPlace={handleAddPlaceClick}\n        onEditAvatar={handleEditAvatarClick}\n        cards={cards}\n        onCardClick={handleCardClick}\n        onCardLike={handleCardLike}\n        onCardDelete={handleConfirmDeleteClick}\n      />\n      <Footer />\n\n      <EditProfilePopup onUpdateUser={handleUpdateUser} isOpen={isEditProfilePopupOpen} onClose={handlePopupClick} />\n\n      <AddPlacePopup onAddPlace={handleAddPlaceSubmit} isOpen={isAddPlacePopupOpen} onClose={handlePopupClick} />\n\n      <EditAvatarPopup onUpdateAvatar={handleUpdateAvatar} isOpen={isEditAvatarPopupOpen} onClose={handlePopupClick} />\n\n      <ConfirmDeletePopup card={selectedCard} onCardDelete={handleCardDelete} isOpen={isConfirmDeletePopupOpen} onClose={handlePopupClick} />\n\n      <ImagePopup card={selectedCard} isOpen={isImagePopupOpen} onClose={handlePopupClick} />\n\n    </>\n  );\n}\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","export default class FormValidator {\n  constructor(data, element) {\n    this._data = data;\n    this._element = element;\n\n    this._inputList = Array.from(\n      this._element.querySelectorAll(this._data.inputSelector)\n    );\n\n    this._buttonElement = this._element.querySelector(this._data.submitButtonSelector);\n  }\n\n  enableValidation() {\n    this._toggleButtonState();\n\n    this._setListeners();\n  }\n\n  _showInputError = (inputElement, errorMessage) => {\n    const errorElement = this._element.querySelector(`#${inputElement.id}-error`);\n    inputElement.classList.add(this._data.inputErrorClass);\n    errorElement.textContent = errorMessage;\n    errorElement.classList.add(this._data.errorClass);\n  }\n\n  _hideInputError = inputElement => {\n    const errorElement = this._element.querySelector(`#${inputElement.id}-error`);\n    inputElement.classList.remove(this._data.inputErrorClass);\n    errorElement.classList.remove(this._data.errorClass);\n    errorElement.textContent = '';\n  }\n\n  _resetFormErrors = () => {\n    this._inputList.forEach(inputElement =>\n      this._hideInputError(inputElement)\n    );\n    this._toggleButtonState(1);\n  }\n\n  _checkInputValidity = inputElement =>\n    inputElement.validity.valid\n      ? this._hideInputError(inputElement)\n      : this._showInputError(inputElement, inputElement.validationMessage);\n\n  _hasInvalidInput = inputList => inputList.some(inputElement => !inputElement.validity.valid)\n\n  _toggleButtonState = disable =>\n    this._buttonElement.disabled = disable || this._hasInvalidInput(this._inputList);\n\n  _validationHandler = inputElement => {\n    this._checkInputValidity(inputElement);\n\n    this._toggleButtonState();\n  }\n\n  _setListeners = () => {\n    this._element.addEventListener('reset', this._resetFormErrors);\n\n    this._inputList.forEach(inputElement =>\n      inputElement.addEventListener('input', () => this._validationHandler(inputElement))\n    );\n  }\n}","import FormValidator from './FormValidator';\nimport { defaultFormConfig } from './utils';\n\nconst popupsToValidate = [\n  '#element-editor',\n  '#avatar-editor',\n  '#profile-editor',\n];\n\nexport default function enableValidations() {\n  popupsToValidate.forEach(popupSelector => {\n    const profileEditorValidator = new FormValidator(\n      defaultFormConfig,\n      document.querySelector(popupSelector).querySelector(defaultFormConfig.formSelector)\n    );\n    profileEditorValidator.enableValidation();\n  });\n}","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './components/App';\nimport reportWebVitals from './reportWebVitals';\n\nimport { CurrentUserProvider } from './contexts/CurrentUserContext';\n\nimport enableValidations from './utils/enableValidations';\n\nReactDOM.render(\n  <React.StrictMode>\n    <CurrentUserProvider>\n      <App />\n    </CurrentUserProvider>\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\nenableValidations();\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}